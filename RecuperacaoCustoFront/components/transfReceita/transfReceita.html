<div class="row">
	<div class="col-md-12">
		<form name="formTransf" class="form" role="form" novalidate>

			<div class="row">

				<div class="form-group col-md-3" ng-class="{'has-error': formTransf.inputCROrigem.$invalid && formTransf.inputCROrigem.$dirty, 'has-success': formTransf.inputCROrigem.$valid}">
					<label for="inputCROrigem">CR Origem</label>
					<input type="text" name="inputCROrigem" id="inputCROrigem" class="form-control" ng-minlength="9" ng-maxlength="9" required ng-model="ct.transf.CROrigem" ng-pattern="/^[0-9]*$/">
					<small class="form-text text-muted">9 caracteres numéricos</small>
				</div>

				<div class="form-group col-md-3" ng-class="{'has-error': formTransf.inputCRDestino.$invalid && formTransf.inputCRDestino.$dirty, 'has-success': formTransf.inputCRDestino.$valid}">
					<label for="inputCRDestino">CR Destino</label>
					<input type="text" name="inputCRDestino" id="inputCRDestino" class="form-control" ng-minlength="9" ng-maxlength="9" required ng-model="ct.transf.CRDestino" ng-pattern="/^[0-9]*$/">
					<small class="form-text text-muted">9 caracteres numéricos</small>
				</div>

				<div class="form-group col-md-4" ng-class="{'has-error': formTransf.inputRegime.$invalid && formTransf.inputRegime.$dirty, 'has-success': formTransf.inputRegime.$valid}">
					<label for="inputRegime">Regime de Tributação</label>
					<select class="form-control" name="inputRegime" id="inputRegime" required ng-model="ct.transf.RegimeTributacao">
						<option value="Cumulativo">Cumulativo</option>
						<option value="Não Cumulativo">Não Cumulativo</option>
					</select>
					<small class="form-text text-muted">Cumulativo/Não Cumulativo</small>
				</div>

				<div class="form-group col-md-2" ng-class="{'has-error': formTransf.inputISS.$invalid && formTransf.inputISS.$dirty, 'has-success': formTransf.inputISS.$valid}">
					<label for="inputISS">ISS</label>
					<div class="input-group">
						<input type="number" name="inputISS" id="inputISS" class="form-control" required ng-model="ct.transf.ISS">
						<span class="input-group-addon">%</span>
					</div>
					<small class="form-text text-muted">Percentual de ISS (%)</small>
				</div>

			</div>

			<div class="row">

				<div class="form-group col-md-2" ng-class="{'has-error': formTransf.inputValor.$invalid && formTransf.inputValor.$dirty, 'has-success': formTransf.inputValor.$valid}">
					<label for="inputValor">Valor</label>
					<div class="input-group">
						<span class="input-group-addon">R$</span>
						<input type="number" name="inputValor" id="inputValor" class="form-control" required ng-model="ct.transf.Valor">
					</div>
					<small class="form-text text-muted">Valor (R$)</small>
				</div>

				<div class="form-group col-md-2" ng-class="{'has-error': formTransf.inputIntercompany.$invalid && formTransf.inputIntercompany.$dirty, 'has-success': formTransf.inputIntercompany.$valid}">
					<label for="inputIntercompany">Intercompany</label>
					<input type="text" name="inputIntercompany" id="inputIntercompany" class="form-control"  ng-minlength="3" ng-maxlength="3" required ng-model="ct.transf.Intercompany">
					<small class="form-text text-muted">3 caracteres</small>
				</div>

				<div class="form-group col-md-3" ng-class="{'has-error': formTransf.inputNF.$invalid && formTransf.inputNF.$dirty, 'has-success': formTransf.inputNF.$valid}">
					<label for="inputNF">NF</label>
					<input type="text" name="inputNF" id="inputNF" class="form-control" ng-maxlength="10" required ng-pattern="/^[0-9]*$/" ng-model="ct.transf.NF">
					<small class="form-text text-muted">10 caracteres numéricos</small>
				</div>

				<div class="form-group col-md-2" ng-class="{'has-error': formTransf.inputDataEmissao.$invalid && formTransf.inputDataEmissao.$dirty, 'has-success': formTransf.inputDataEmissao.$valid}">
					<label for="inputDataEmissao">Data Emissão</label>
					<input type="date" name="inputDataEmissao" id="inputDataEmissao" class="form-control" required ng-model="ct.transf.DataEmissao">
					<small class="form-text text-muted">Data de Emissão da NF</small>
				</div>

				<div class="form-group col-md-3" ng-class="{'has-error': formTransf.inputRazaoSocial.$invalid && formTransf.inputRazaoSocial.$dirty, 'has-success': formTransf.inputRazaoSocial.$valid}">
					<label for="inputRazaoSocial">Razão Social</label>
					<input type="text" name="inputRazaoSocial" id="inputRazaoSocial" class="form-control" required ng-maxlength="10" ng-model="ct.transf.RazaoSocial">
					<small class="form-text text-muted">10 caracteres numéricos</small>
				</div>

			</div>

			<div class="row">
				<div class="form-group col-md-12" ng-class="{'has-error': formTransf.inputHistorico.$invalid && formTransf.inputHistorico.$dirty, 'has-success': formTransf.inputHistorico.$valid}">
					<label for="inputHistorico">Histórico</label>
					<textarea class="form-control" required ng-maxlength="150" ng-model="ct.transf.Historico"></textarea>
					<small class="form-text text-muted">150 caracteres</small>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<button class="btn btn-success" ng-click="ct.saveTransferenciaReceita()" ng-disabled="formTransf.$invalid">Transferir Receita <i class="fa fa-share"></i></button>
				</div>
			</div>

		</form>
	</div>
</div>

<hr>

<div class="row">
	<div class="col-md-12">
		<h4>Transferências Realizadas</h4>

		<table class="table table-striped table-condensed table-responsive">
			<thead>
				<tr>
					<th>CR Origem</th>
					<th>CR Destino</th>
					<th>Razão Social</th>
					<th>Regime Tributação</th>
					<th>ISS</th>
					<th>NF</th>
					<th>Data Emissão</th>
					<th>Valor</th>
					<th>Histórico</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="t in ct.transferencias">
					<td>{{t.CROrigem}}</td>
					<td>{{t.CRDestino}}</td>
					<td>{{t.RazaoSocial}}</td>
					<td>{{t.RegimeTributacao}}</td>
					<td>{{t.ISS * 100 | number:2}}%</td>
					<td>{{t.NF}}</td>
					<td>{{t.DataEmissao | date:'dd/MM/yy'}}</td>
					<td>R$ {{t.Valor | number:2}}</td>
					<td>{{t.Historico| ellipsis:5:5}}</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
